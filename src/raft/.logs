[Follower 0/0/-1/-1/0] Activated
[Follower 0/0/-1/-1/0] HeartBeat timeout after 355ms
[Follower 1/0/-1/-1/0] Activated
[Follower 1/0/-1/-1/0] HeartBeat timeout after 396ms
Test (3D): install snapshots (crash) ...

==============================

Start command 9059774801807307350, expectedServers = 3, retry = true
[Follower 2/0/-1/-1/0] Activated
[Follower 2/0/-1/-1/0] HeartBeat timeout after 335ms
Command 9059774801807307350 started at index = -1 by leader -1
Command 9059774801807307350 started at index = -1 by leader -1
Command 9059774801807307350 started at index = -1 by leader -1
Command 9059774801807307350 started at index = -1 by leader -1
[Follower 0/0/-1/-1/0] Put ev *raft.HeartBeatTimeoutEvent
[Follower 0/0/-1/-1/0] HeartBeat Timeout
[Candidate 0/1/-1/-1] Encode state, LAI = -1
[Candidate 0/1/-1/-1] Election timeout after 1.065s
[Candidate 0/1/-1/-1] Request vote from 1
[Candidate 0/1/-1/-1] Activated
[Candidate 0/1/-1/-1] Request vote from 2
[Follower 2/0/-1/-1/0] RequestVote RPC from [0/1], last log info = [-1/0]
[Follower 1/0/-1/-1/0] RequestVote RPC from [0/1], last log info = [-1/0]
[Follower 2/0/-1/-1/0] RequestVote RPC from [0/1] received in channel
[Follower 2/1/-1/-1/0] Encode state, LAI = -1
[Follower 1/0/-1/-1/0] RequestVote RPC from [0/1] received in channel
[Follower 1/1/-1/-1/0] Encode state, LAI = -1
[Follower 2/1/-1/-1/0] Grant vote to 0
[Follower 2/1/-1/-1/0] HeartBeat timeout after 382ms
[Follower 1/1/-1/-1/0] Grant vote to 0
[Follower 1/1/-1/-1/0] HeartBeat timeout after 330ms
[Candidate 0/1/-1/-1] Put ev *raft.VoteGrantEvent
[Candidate 0/1/-1/-1] Elected
[Candidate 0/1/-1/-1] Stopped
[Leader 0/1/0/-1/1] Encode state, LAI = -1
[Leader 0/1/0/-1/1] Add NoopEntry with index = 0
[Leader 0/1/0/-1/1] tryIndexLogTerm, m = 0, mTerm = 1, ok = true
[Leader 0/1/0/-1/1] tryIndexLogTerm, m = 0, mTerm = 1, ok = true
[Follower 2/1/-1/-1/0] AppendEntries RPC from [0/1], PrevLogInfo = [0/1], LeaderCommit = -1, Entries = []
[Follower 2/1/-1/-1/0] AppendEntries from [0/1] received in channel
[Follower 2/1/-1/-1/0] HeartBeat timeout after 308ms
[Leader 0/1/0/-1/1] [repl 2] m = 0 not matched
[Leader 0/1/0/-1/1] Peer 2 match index = 0
[Follower 1/1/-1/-1/0] AppendEntries RPC from [0/1], PrevLogInfo = [0/1], LeaderCommit = -1, Entries = []
[Follower 1/1/-1/-1/0] AppendEntries from [0/1] received in channel
[Follower 1/1/-1/-1/0] HeartBeat timeout after 305ms
[Leader 0/1/0/-1/1] [repl 1] m = 0 not matched
[Leader 0/1/0/-1/1] Peer 1 match index = 0
[Leader 0/1/0/-1/1] logs.noopCount = 1
[Leader 0/1/1/-1/2] Encode state, LAI = -1
[Leader 0/1/1/-1/2] Start command with index = 1, commandIndex = 1
Command 9059774801807307350 started at index = 1 by leader 0
Command 1 replicated count = 0, cmd1 = %!d(<nil>), cmd = 9059774801807307350
[Leader 0/1/1/-1/2] Replication to peer 1
[Leader 0/1/1/-1/2] Replication to peer 2
[Follower 1/1/-1/-1/0] AppendEntries RPC from [0/1], PrevLogInfo = [-1/-1], LeaderCommit = -1, Entries = [0 1]
[Follower 1/1/-1/-1/0] AppendEntries from [0/1] received in channel
[Follower 1/1/-1/-1/0] HeartBeat timeout after 371ms
[Follower 1/1/1/-1/2] Encode state, LAI = -1
[Follower 1/1/1/-1/2] updateCommit to -1
[Follower 2/1/-1/-1/0] AppendEntries RPC from [0/1], PrevLogInfo = [-1/-1], LeaderCommit = -1, Entries = [0 1]
[Follower 2/1/-1/-1/0] AppendEntries from [0/1] received in channel
[Follower 2/1/-1/-1/0] HeartBeat timeout after 360ms
[Follower 2/1/1/-1/2] Encode state, LAI = -1
[Follower 2/1/1/-1/2] updateCommit to -1
[Leader 0/1/1/-1/2] 1 confirmed log [0 1]
[Leader 0/1/1/-1/2] Put ev *raft.ReplConfirmEvent
[Leader 0/1/1/-1/2] Peer 1 confirmed log [0, 2)
[Leader 0/1/1/-1/2] updateCommit to 1
[Leader 0/1/1/-1/2] updateCommit: newCommit = 1
[Leader 0/1/1/1/2] Update LCI to 1
[Leader 0/1/1/1/2] Encode state, LAI = -1
[Leader 0/1/1/1/2] Applied log 1
[Leader 0/1/1/1/2] 2 confirmed log [0 1]
[Leader 0/1/1/1/2] Put ev *raft.ReplConfirmEvent
server 0 applied command 1, last applied = 0
Command: set server 0 last applied = 1
[Leader 0/1/1/1/2] Peer 2 confirmed log [0, 2)
Command 1 replicated count = 1, cmd1 = 9059774801807307350, cmd = 9059774801807307350
Command 1 replicated count = 1, cmd1 = 9059774801807307350, cmd = 9059774801807307350
[Leader 0/1/1/1/2] Replication to peer 2
[Leader 0/1/1/1/2] Replication to peer 1
[Follower 2/1/1/-1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 2/1/1/-1/2] AppendEntries from [0/1] received in channel
[Follower 2/1/1/-1/2] HeartBeat timeout after 318ms
[Follower 2/1/1/-1/2] updateCommit to 1
[Follower 2/1/1/-1/2] updateCommit: newCommit = 1
[Follower 2/1/1/1/2] Update LCI to 1
[Follower 2/1/1/1/2] Encode state, LAI = -1
[Follower 2/1/1/1/2] Applied log 1
server 2 applied command 1, last applied = 0
Command: set server 2 last applied = 1
[Follower 1/1/1/-1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 1/1/1/-1/2] AppendEntries from [0/1] received in channel
[Follower 1/1/1/-1/2] HeartBeat timeout after 339ms
[Follower 1/1/1/-1/2] updateCommit to 1
[Follower 1/1/1/-1/2] updateCommit: newCommit = 1
[Follower 1/1/1/1/2] Update LCI to 1
[Follower 1/1/1/1/2] Encode state, LAI = -1
[Follower 1/1/1/1/2] Applied log 1
server 1 applied command 1, last applied = 0
Command: set server 1 last applied = 1
Command 1 replicated count = 3, cmd1 = 9059774801807307350, cmd = 9059774801807307350
Command with index 1 agreed
[Leader 0/1/1/1/2] Replication to peer 1
[Leader 0/1/1/1/2] Replication to peer 2
[Follower 2/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 2/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 2/1/1/1/2] HeartBeat timeout after 344ms
[Follower 2/1/1/1/2] updateCommit to 1
[Follower 1/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 1/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 1/1/1/1/2] HeartBeat timeout after 372ms
[Follower 1/1/1/1/2] updateCommit to 1
[Leader 0/1/1/1/2] Replication to peer 2
[Leader 0/1/1/1/2] Replication to peer 1
[Follower 2/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 2/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 2/1/1/1/2] HeartBeat timeout after 364ms
[Follower 2/1/1/1/2] updateCommit to 1
[Follower 1/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 1/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 1/1/1/1/2] HeartBeat timeout after 337ms
[Follower 1/1/1/1/2] updateCommit to 1
[Leader 0/1/1/1/2] Replication to peer 2
[Leader 0/1/1/1/2] Replication to peer 1
[Follower 1/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 1/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 2/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 1/1/1/1/2] HeartBeat timeout after 329ms
[Follower 1/1/1/1/2] updateCommit to 1
[Follower 2/1/1/1/2] HeartBeat timeout after 377ms
[Follower 2/1/1/1/2] updateCommit to 1
[Follower 2/1/1/1/2] AppendEntries from [0/1] received in channel
[Leader 0/1/1/1/2] Replication to peer 2
[Leader 0/1/1/1/2] Replication to peer 1
[Follower 2/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 2/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 2/1/1/1/2] HeartBeat timeout after 383ms
[Follower 2/1/1/1/2] updateCommit to 1
[Follower 1/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 1/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 1/1/1/1/2] HeartBeat timeout after 373ms
[Follower 1/1/1/1/2] updateCommit to 1
[Leader 0/1/1/1/2] Replication to peer 1
[Leader 0/1/1/1/2] Replication to peer 2
[Follower 1/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 2/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 1/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 2/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 1/1/1/1/2] HeartBeat timeout after 309ms
[Follower 1/1/1/1/2] updateCommit to 1
[Follower 2/1/1/1/2] HeartBeat timeout after 316ms
[Follower 2/1/1/1/2] updateCommit to 1
[Leader 0/1/1/1/2] Replication to peer 2
[Leader 0/1/1/1/2] Replication to peer 1
[Follower 2/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 1/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 1/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 2/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 2/1/1/1/2] HeartBeat timeout after 385ms
[Follower 2/1/1/1/2] updateCommit to 1
[Follower 1/1/1/1/2] HeartBeat timeout after 319ms
[Follower 1/1/1/1/2] updateCommit to 1
[Leader 0/1/1/1/2] Replication to peer 2
[Leader 0/1/1/1/2] Replication to peer 1
[Follower 2/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 2/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 2/1/1/1/2] HeartBeat timeout after 369ms
[Follower 2/1/1/1/2] updateCommit to 1
[Follower 1/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 1/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 1/1/1/1/2] HeartBeat timeout after 307ms
[Follower 1/1/1/1/2] updateCommit to 1
[Leader 0/1/1/1/2] Replication to peer 2
[Leader 0/1/1/1/2] Replication to peer 1
[Follower 2/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 2/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 2/1/1/1/2] HeartBeat timeout after 319ms
[Follower 2/1/1/1/2] updateCommit to 1
[Follower 1/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 1/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 1/1/1/1/2] HeartBeat timeout after 360ms
[Follower 1/1/1/1/2] updateCommit to 1
[Leader 0/1/1/1/2] Replication to peer 2
[Leader 0/1/1/1/2] Replication to peer 1
[Follower 1/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 1/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 1/1/1/1/2] HeartBeat timeout after 338ms
[Follower 1/1/1/1/2] updateCommit to 1
[Follower 2/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 2/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 2/1/1/1/2] HeartBeat timeout after 388ms
[Follower 2/1/1/1/2] updateCommit to 1
[Leader 0/1/1/1/2] Replication to peer 2
[Leader 0/1/1/1/2] Replication to peer 1
[Follower 2/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 2/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 2/1/1/1/2] HeartBeat timeout after 357ms
[Follower 2/1/1/1/2] updateCommit to 1
[Follower 1/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 1/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 1/1/1/1/2] HeartBeat timeout after 335ms
[Follower 1/1/1/1/2] updateCommit to 1
leader1 = 0

=============================

iter = 0

victim = 1, sender = 0

[Follower 1/1/1/1/2] Now I'm dead
[Leader 0/1/1/1/2] Replication to peer 2
[Leader 0/1/1/1/2] Replication to peer 1
[Follower 2/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 2/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 2/1/1/1/2] HeartBeat timeout after 354ms
[Follower 2/1/1/1/2] updateCommit to 1
[Follower 1/1/1/1/2] LAI = -1 before applier quit
[Follower 1/1/1/1/2] applier done
victim 1 crashed

==============================

Start command 3580413149378248839, expectedServers = 2, retry = true
[Leader 0/1/1/1/2] logs.noopCount = 1
[Leader 0/1/2/1/3] Encode state, LAI = -1
[Leader 0/1/2/1/3] Start command with index = 2, commandIndex = 2
Command 3580413149378248839 started at index = 2 by leader 0
Command 2 replicated count = 0, cmd1 = %!d(<nil>), cmd = 3580413149378248839
[Leader 0/1/2/1/3] Replication to peer 2
[Follower 2/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = [2 2]
[Follower 2/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 2/1/1/1/2] HeartBeat timeout after 312ms
[Follower 2/1/2/1/3] Encode state, LAI = -1
[Follower 2/1/2/1/3] updateCommit to 1
[Leader 0/1/2/1/3] 2 confirmed log [2 2]
[Leader 0/1/2/1/3] Put ev *raft.ReplConfirmEvent
[Leader 0/1/2/1/3] Peer 2 confirmed log [2, 3)
[Leader 0/1/2/1/3] updateCommit to 2
[Leader 0/1/2/1/3] updateCommit: newCommit = 2
[Leader 0/1/2/2/3] Update LCI to 2
[Leader 0/1/2/2/3] Encode state, LAI = -1
[Leader 0/1/2/2/3] Applied log 2
server 0 applied command 2, last applied = 1
Command: set server 0 last applied = 2
Command 2 replicated count = 1, cmd1 = 3580413149378248839, cmd = 3580413149378248839
Command 2 replicated count = 1, cmd1 = 3580413149378248839, cmd = 3580413149378248839
[Leader 0/1/2/2/3] Replication to peer 2
[Follower 2/1/2/1/3] AppendEntries RPC from [0/1], PrevLogInfo = [2/1], LeaderCommit = 2, Entries = []
[Follower 2/1/2/1/3] AppendEntries from [0/1] received in channel
[Follower 2/1/2/1/3] HeartBeat timeout after 365ms
[Follower 2/1/2/1/3] updateCommit to 2
[Follower 2/1/2/1/3] updateCommit: newCommit = 2
[Follower 2/1/2/2/3] Update LCI to 2
[Follower 2/1/2/2/3] Encode state, LAI = -1
[Follower 2/1/2/2/3] Applied log 2
server 2 applied command 2, last applied = 1
Command: set server 2 last applied = 2
Command 2 replicated count = 2, cmd1 = 3580413149378248839, cmd = 3580413149378248839
Command with index 2 agreed
[Leader 0/1/2/2/3] logs.noopCount = 1
[Leader 0/1/3/2/4] Encode state, LAI = -1
[Leader 0/1/3/2/4] Start command with index = 3, commandIndex = 3
[Leader 0/1/3/2/4] logs.noopCount = 1
[Leader 0/1/4/2/5] Encode state, LAI = -1
[Leader 0/1/4/2/5] Start command with index = 4, commandIndex = 4
[Leader 0/1/4/2/5] logs.noopCount = 1
[Leader 0/1/5/2/6] Encode state, LAI = -1
[Leader 0/1/5/2/6] Start command with index = 5, commandIndex = 5
[Leader 0/1/5/2/6] logs.noopCount = 1
[Leader 0/1/6/2/7] Encode state, LAI = -1
[Leader 0/1/6/2/7] Start command with index = 6, commandIndex = 6
[Leader 0/1/6/2/7] logs.noopCount = 1
[Leader 0/1/7/2/8] Encode state, LAI = -1
[Leader 0/1/7/2/8] Start command with index = 7, commandIndex = 7
[Leader 0/1/7/2/8] logs.noopCount = 1
[Leader 0/1/8/2/9] Encode state, LAI = -1
[Leader 0/1/8/2/9] Start command with index = 8, commandIndex = 8
[Leader 0/1/8/2/9] logs.noopCount = 1
[Leader 0/1/9/2/10] Encode state, LAI = -1
[Leader 0/1/9/2/10] Start command with index = 9, commandIndex = 9
[Leader 0/1/9/2/10] logs.noopCount = 1
[Leader 0/1/10/2/11] Encode state, LAI = -1
[Leader 0/1/10/2/11] Start command with index = 10, commandIndex = 10
[Leader 0/1/10/2/11] logs.noopCount = 1
[Leader 0/1/11/2/12] Encode state, LAI = -1
[Leader 0/1/11/2/12] Start command with index = 11, commandIndex = 11

==============================

Start command 6240468908132127693, expectedServers = 2, retry = true
[Leader 0/1/11/2/12] logs.noopCount = 1
[Leader 0/1/12/2/13] Encode state, LAI = -1
[Leader 0/1/12/2/13] Start command with index = 12, commandIndex = 12
Command 6240468908132127693 started at index = 12 by leader 0
Command 12 replicated count = 0, cmd1 = %!d(<nil>), cmd = 6240468908132127693
Command 12 replicated count = 0, cmd1 = %!d(<nil>), cmd = 6240468908132127693
Command 12 replicated count = 0, cmd1 = %!d(<nil>), cmd = 6240468908132127693
[Leader 0/1/12/2/13] Replication to peer 2
[Follower 2/1/2/2/3] AppendEntries RPC from [0/1], PrevLogInfo = [2/1], LeaderCommit = 2, Entries = [3 12]
[Follower 2/1/2/2/3] AppendEntries from [0/1] received in channel
[Follower 2/1/2/2/3] HeartBeat timeout after 358ms
[Follower 2/1/12/2/13] Encode state, LAI = -1
[Follower 2/1/12/2/13] updateCommit to 2
[Leader 0/1/12/2/13] 2 confirmed log [3 12]
[Leader 0/1/12/2/13] Put ev *raft.ReplConfirmEvent
[Leader 0/1/12/2/13] Peer 2 confirmed log [3, 13)
[Leader 0/1/12/2/13] updateCommit to 12
[Leader 0/1/12/2/13] updateCommit: newCommit = 12
[Leader 0/1/12/12/13] Update LCI to 12
[Leader 0/1/12/12/13] Encode state, LAI = -1
[Leader 0/1/12/12/13] Applied log 3
server 0 applied command 3, last applied = 2
Command: set server 0 last applied = 3
server 0 applied command 4, last applied = 3
Command: set server 0 last applied = 4
[Leader 0/1/12/12/13] Applied log 4
[Leader 0/1/12/12/13] Applied log 5
server 0 applied command 5, last applied = 4
Command: set server 0 last applied = 5
server 0 applied command 6, last applied = 5
Command: set server 0 last applied = 6
[Leader 0/1/12/12/13] Applied log 6
[Leader 0/1/12/12/13] Applied log 7
server 0 applied command 7, last applied = 6
Command: set server 0 last applied = 7
server 0 applied command 8, last applied = 7
[Leader 0/1/12/12/13] Applied log 8
Command: set server 0 last applied = 8
server 0 applied command 9, last applied = 8
Command: set server 0 last applied = 9
[Leader 0/1/12/12/13] Applied log 9
[Leader 0/1/12/12/13] Take snapshot at command index 9
[Leader 0/1/12/12/13] Found logIndex = 9
[Leader 0/1/12/12/3] Encode state, LAI = -1
server 0 applied command 10, last applied = 9
Command: set server 0 last applied = 10
[Leader 0/1/12/12/3] Applied log 10
[Leader 0/1/12/12/3] Applied log 11
server 0 applied command 11, last applied = 10
Command: set server 0 last applied = 11
server 0 applied command 12, last applied = 11
Command: set server 0 last applied = 12
[Leader 0/1/12/12/3] Applied log 12
Command 12 replicated count = 1, cmd1 = 6240468908132127693, cmd = 6240468908132127693
Command 12 replicated count = 1, cmd1 = 6240468908132127693, cmd = 6240468908132127693
[Leader 0/1/12/12/3] Replication to peer 2
[Follower 2/1/12/2/13] AppendEntries RPC from [0/1], PrevLogInfo = [12/1], LeaderCommit = 12, Entries = []
[Follower 2/1/12/2/13] AppendEntries from [0/1] received in channel
[Follower 2/1/12/2/13] HeartBeat timeout after 357ms
[Follower 2/1/12/2/13] updateCommit to 12
[Follower 2/1/12/2/13] updateCommit: newCommit = 12
[Follower 2/1/12/12/13] Update LCI to 12
[Follower 2/1/12/12/13] Encode state, LAI = -1
[Follower 2/1/12/12/13] Applied log 3
server 2 applied command 3, last applied = 2
Command: set server 2 last applied = 3
server 2 applied command 4, last applied = 3
Command: set server 2 last applied = 4
[Follower 2/1/12/12/13] Applied log 4
[Follower 2/1/12/12/13] Applied log 5
server 2 applied command 5, last applied = 4
Command: set server 2 last applied = 5
server 2 applied command 6, last applied = 5
Command: set server 2 last applied = 6
[Follower 2/1/12/12/13] Applied log 6
[Follower 2/1/12/12/13] Applied log 7
server 2 applied command 7, last applied = 6
Command: set server 2 last applied = 7
server 2 applied command 8, last applied = 7
Command: set server 2 last applied = 8
[Follower 2/1/12/12/13] Applied log 8
[Follower 2/1/12/12/13] Applied log 9
server 2 applied command 9, last applied = 8
Command: set server 2 last applied = 9
[Follower 2/1/12/12/13] Take snapshot at command index 9
[Follower 2/1/12/12/13] Found logIndex = 9
[Follower 2/1/12/12/3] Encode state, LAI = -1
server 2 applied command 10, last applied = 9
Command: set server 2 last applied = 10
[Follower 2/1/12/12/3] Applied log 10
[Follower 2/1/12/12/3] Applied log 11
server 2 applied command 11, last applied = 10
Command: set server 2 last applied = 11
server 2 applied command 12, last applied = 11
Command: set server 2 last applied = 12
[Follower 2/1/12/12/3] Applied log 12
Command 12 replicated count = 2, cmd1 = 6240468908132127693, cmd = 6240468908132127693
Command with index 12 agreed
[Server 1] Recover with
LLI = 1, LCI = 1, LAI = -1
offset = 0
Add ApplyLogEntry for unfinished logs with lai = -1, lci = 1
[Leader 0/1/12/12/3] Replication to peer 2
[Follower 2/1/12/12/3] AppendEntries RPC from [0/1], PrevLogInfo = [12/1], LeaderCommit = 12, Entries = []
[Follower 2/1/12/12/3] AppendEntries from [0/1] received in channel
[Follower 2/1/12/12/3] HeartBeat timeout after 347ms
[Follower 2/1/12/12/3] updateCommit to 12
[Leader 0/1/12/12/3] Replication to peer 2
[Follower 2/1/12/12/3] AppendEntries RPC from [0/1], PrevLogInfo = [12/1], LeaderCommit = 12, Entries = []
[Follower 2/1/12/12/3] AppendEntries from [0/1] received in channel
[Follower 2/1/12/12/3] HeartBeat timeout after 374ms
[Follower 2/1/12/12/3] updateCommit to 12
victim 1 started and connected
[Follower 1/1/1/1/2] Activated
[Follower 1/1/1/1/2] HeartBeat timeout after 342ms

==============================

Start command 8468547913381524429, expectedServers = 3, retry = true
[Leader 0/1/12/12/3] logs.noopCount = 1
[Leader 0/1/13/12/4] Encode state, LAI = -1
server 1 applied command 1, last applied = 0
Command: set server 1 last applied = 1
[Follower 1/1/1/1/2] Applied log 1
[Leader 0/1/13/12/4] Start command with index = 13, commandIndex = 13
Command 8468547913381524429 started at index = 13 by leader 0
Command 13 replicated count = 0, cmd1 = %!d(<nil>), cmd = 8468547913381524429
Command 13 replicated count = 0, cmd1 = %!d(<nil>), cmd = 8468547913381524429
[Leader 0/1/13/12/4] Replication to peer 2
[Follower 2/1/12/12/3] AppendEntries RPC from [0/1], PrevLogInfo = [12/1], LeaderCommit = 12, Entries = [13 13]
[Follower 2/1/12/12/3] AppendEntries from [0/1] received in channel
[Follower 2/1/12/12/3] HeartBeat timeout after 306ms
[Follower 2/1/13/12/4] Encode state, LAI = -1
[Follower 2/1/13/12/4] updateCommit to 12
[Leader 0/1/13/12/4] 2 confirmed log [13 13]
[Leader 0/1/13/12/4] Put ev *raft.ReplConfirmEvent
[Leader 0/1/13/12/4] Peer 2 confirmed log [13, 14)
[Leader 0/1/13/12/4] updateCommit to 13
[Leader 0/1/13/12/4] updateCommit: newCommit = 13
[Leader 0/1/13/13/4] Update LCI to 13
[Leader 0/1/13/13/4] Encode state, LAI = -1
[Leader 0/1/13/13/4] Applied log 13
server 0 applied command 13, last applied = 12
Command: set server 0 last applied = 13
Command 13 replicated count = 1, cmd1 = 8468547913381524429, cmd = 8468547913381524429
Command 13 replicated count = 1, cmd1 = 8468547913381524429, cmd = 8468547913381524429
Command 13 replicated count = 1, cmd1 = 8468547913381524429, cmd = 8468547913381524429
[Leader 0/1/13/13/4] Replication to peer 2
[Follower 2/1/13/12/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 2/1/13/12/4] AppendEntries from [0/1] received in channel
[Follower 2/1/13/12/4] HeartBeat timeout after 303ms
[Follower 2/1/13/12/4] updateCommit to 13
[Follower 2/1/13/12/4] updateCommit: newCommit = 13
[Follower 2/1/13/13/4] Update LCI to 13
[Follower 2/1/13/13/4] Encode state, LAI = -1
[Follower 1/1/1/1/2] AppendEntries RPC from [0/1], PrevLogInfo = [1/1], LeaderCommit = 1, Entries = []
[Follower 1/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 1/1/1/1/2] HeartBeat timeout after 310ms
[Follower 1/1/1/1/2] updateCommit to 1
[Follower 2/1/13/13/4] Applied log 13
server 2 applied command 13, last applied = 12
Command: set server 2 last applied = 13
[Leader 0/1/13/13/4] Replication to peer 1
[Follower 1/1/1/1/2] InstallSnapshot RPC from [0/1], LastInclude = [9/1]
[Follower 1/1/1/1/2] AppendEntries from [0/1] received in channel
[Follower 1/1/1/1/2] HeartBeat timeout after 397ms
[Follower 1/1/9/9/0] Encode state, LAI = -1
[Follower 1/1/9/9/0] Snapshot update LAI = 9
server 1 applied snapshot with LII 9
server 1 ingest snapshot with index = 9
[Follower 1/1/9/9/0] Encode state, LAI = 9
[Leader 0/1/13/13/4] Peer 1 confirmed snapshot with lastIncludeIndex = 9
Snapshot: set server 1 last applied = 9
Command 13 replicated count = 2, cmd1 = 8468547913381524429, cmd = 8468547913381524429
Command 13 replicated count = 2, cmd1 = 8468547913381524429, cmd = 8468547913381524429
[Leader 0/1/13/13/4] Replication to peer 2
[Leader 0/1/13/13/4] Replication to peer 1
[Follower 2/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 2/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 2/1/13/13/4] HeartBeat timeout after 366ms
[Follower 2/1/13/13/4] updateCommit to 13
[Follower 1/1/9/9/0] AppendEntries RPC from [0/1], PrevLogInfo = [9/1], LeaderCommit = 13, Entries = [10 13]
[Follower 1/1/9/9/0] AppendEntries from [0/1] received in channel
[Follower 1/1/9/9/0] HeartBeat timeout after 338ms
[Follower 1/1/13/9/4] Encode state, LAI = 9
[Follower 1/1/13/9/4] updateCommit to 13
[Follower 1/1/13/9/4] updateCommit: newCommit = 13
[Follower 1/1/13/13/4] Update LCI to 13
[Follower 1/1/13/13/4] Encode state, LAI = 9
[Follower 1/1/13/13/4] Applied log 10
server 1 applied command 10, last applied = 9
Command: set server 1 last applied = 10
server 1 applied command 11, last applied = 10
Command: set server 1 last applied = 11
[Follower 1/1/13/13/4] Applied log 11
[Follower 1/1/13/13/4] Applied log 12
server 1 applied command 12, last applied = 11
Command: set server 1 last applied = 12
server 1 applied command 13, last applied = 12
Command: set server 1 last applied = 13
[Follower 1/1/13/13/4] Applied log 13
[Leader 0/1/13/13/4] 1 confirmed log [10 13]
[Leader 0/1/13/13/4] Put ev *raft.ReplConfirmEvent
[Leader 0/1/13/13/4] Peer 1 confirmed log [10, 14)
Command 13 replicated count = 3, cmd1 = 8468547913381524429, cmd = 8468547913381524429
Command with index 13 agreed
[Leader 0/1/13/13/4] Replication to peer 2
[Leader 0/1/13/13/4] Replication to peer 1
[Follower 2/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 2/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 2/1/13/13/4] HeartBeat timeout after 345ms
[Follower 2/1/13/13/4] updateCommit to 13
[Follower 1/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 1/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 1/1/13/13/4] HeartBeat timeout after 365ms
[Follower 1/1/13/13/4] updateCommit to 13
[Leader 0/1/13/13/4] Replication to peer 2
[Leader 0/1/13/13/4] Replication to peer 1
[Follower 2/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 2/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 2/1/13/13/4] HeartBeat timeout after 339ms
[Follower 2/1/13/13/4] updateCommit to 13
[Follower 1/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 1/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 1/1/13/13/4] HeartBeat timeout after 335ms
[Follower 1/1/13/13/4] updateCommit to 13
[Leader 0/1/13/13/4] Replication to peer 2
[Leader 0/1/13/13/4] Replication to peer 1
[Follower 2/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 2/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 2/1/13/13/4] HeartBeat timeout after 357ms
[Follower 2/1/13/13/4] updateCommit to 13
[Follower 1/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 1/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 1/1/13/13/4] HeartBeat timeout after 336ms
[Follower 1/1/13/13/4] updateCommit to 13
[Leader 0/1/13/13/4] Replication to peer 2
[Follower 2/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Leader 0/1/13/13/4] Replication to peer 1
[Follower 2/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 2/1/13/13/4] HeartBeat timeout after 392ms
[Follower 2/1/13/13/4] updateCommit to 13
[Follower 1/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 1/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 1/1/13/13/4] HeartBeat timeout after 327ms
[Follower 1/1/13/13/4] updateCommit to 13
[Leader 0/1/13/13/4] Replication to peer 2
[Leader 0/1/13/13/4] Replication to peer 1
[Follower 1/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 2/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 2/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 1/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 2/1/13/13/4] HeartBeat timeout after 339ms
[Follower 1/1/13/13/4] HeartBeat timeout after 395ms
[Follower 2/1/13/13/4] updateCommit to 13
[Follower 1/1/13/13/4] updateCommit to 13
[Leader 0/1/13/13/4] Replication to peer 2
[Leader 0/1/13/13/4] Replication to peer 1
[Follower 2/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 2/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 2/1/13/13/4] HeartBeat timeout after 360ms
[Follower 2/1/13/13/4] updateCommit to 13
[Follower 1/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 1/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 1/1/13/13/4] HeartBeat timeout after 318ms
[Follower 1/1/13/13/4] updateCommit to 13
[Leader 0/1/13/13/4] Replication to peer 1
[Leader 0/1/13/13/4] Replication to peer 2
[Follower 1/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 1/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 1/1/13/13/4] HeartBeat timeout after 397ms
[Follower 1/1/13/13/4] updateCommit to 13
[Follower 2/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 2/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 2/1/13/13/4] HeartBeat timeout after 310ms
[Follower 2/1/13/13/4] updateCommit to 13
[Leader 0/1/13/13/4] Replication to peer 2
[Leader 0/1/13/13/4] Replication to peer 1
[Follower 2/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 2/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 2/1/13/13/4] HeartBeat timeout after 332ms
[Follower 2/1/13/13/4] updateCommit to 13
[Follower 1/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 1/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 1/1/13/13/4] HeartBeat timeout after 331ms
[Follower 1/1/13/13/4] updateCommit to 13
[Leader 0/1/13/13/4] Replication to peer 2
[Leader 0/1/13/13/4] Replication to peer 1
[Follower 2/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 2/1/13/13/4] HeartBeat timeout after 309ms
[Follower 2/1/13/13/4] updateCommit to 13
[Follower 2/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 1/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 1/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 1/1/13/13/4] HeartBeat timeout after 379ms
[Follower 1/1/13/13/4] updateCommit to 13
[Leader 0/1/13/13/4] Replication to peer 2
[Follower 2/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 2/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 2/1/13/13/4] HeartBeat timeout after 349ms
[Follower 2/1/13/13/4] updateCommit to 13
[Leader 0/1/13/13/4] Replication to peer 1
[Follower 1/1/13/13/4] AppendEntries RPC from [0/1], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 1/1/13/13/4] AppendEntries from [0/1] received in channel
[Follower 1/1/13/13/4] HeartBeat timeout after 387ms
[Follower 1/1/13/13/4] updateCommit to 13

=============================

iter = 1

victim = 0, sender = 1

[Leader 0/1/13/13/4] Now I'm dead
[Leader 0/1/13/13/4] LAI = -1 before applier quit
[Leader 0/1/13/13/4] applier done
victim 0 crashed

==============================

Start command 4447108695505057755, expectedServers = 2, retry = true
Command 4447108695505057755 started at index = -1 by leader -1
[Leader 0/1/13/13/4] Replication to peer 1
[Leader 0/1/13/13/4] Replication to peer 2
Command 4447108695505057755 started at index = -1 by leader -1
Command 4447108695505057755 started at index = -1 by leader -1
Command 4447108695505057755 started at index = -1 by leader -1
Command 4447108695505057755 started at index = -1 by leader -1
Command 4447108695505057755 started at index = -1 by leader -1
Command 4447108695505057755 started at index = -1 by leader -1
[Follower 2/1/13/13/4] Put ev *raft.HeartBeatTimeoutEvent
[Follower 2/1/13/13/4] HeartBeat Timeout
[Candidate 2/2/13/13] Encode state, LAI = -1
[Candidate 2/2/13/13] Election timeout after 913ms
[Candidate 2/2/13/13] Activated
[Candidate 2/2/13/13] Request vote from 1
[Candidate 2/2/13/13] Request vote from 0
[Follower 1/1/13/13/4] RequestVote RPC from [2/2], last log info = [13/1]
[Follower 1/1/13/13/4] RequestVote RPC from [2/2] received in channel
[Follower 1/2/13/13/4] Encode state, LAI = 9
[Follower 1/2/13/13/4] Grant vote to 2
[Follower 1/2/13/13/4] HeartBeat timeout after 393ms
[Candidate 2/2/13/13] Put ev *raft.VoteGrantEvent
[Candidate 2/2/13/13] Elected
[Candidate 2/2/13/13] Stopped
[Leader 2/2/14/13/5] Encode state, LAI = -1
[Leader 2/2/14/13/5] Add NoopEntry with index = 14
[Leader 2/2/14/13/5] tryIndexLogTerm, m = 11, mTerm = 1, ok = true
[Leader 2/2/14/13/5] tryIndexLogTerm, m = 11, mTerm = 1, ok = true
[Follower 1/2/13/13/4] AppendEntries RPC from [2/2], PrevLogInfo = [11/1], LeaderCommit = 13, Entries = []
[Follower 1/2/13/13/4] AppendEntries from [2/2] received in channel
[Follower 1/2/13/13/4] HeartBeat timeout after 321ms
[Follower 1/2/13/13/4] Received an entry index 11 < LCI 13
[Leader 2/2/14/13/5] [repl 1] m = 11 matched
[Leader 2/2/14/13/5] tryIndexLogTerm, m = 13, mTerm = 1, ok = true
[Follower 1/2/13/13/4] AppendEntries RPC from [2/2], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = []
[Follower 1/2/13/13/4] AppendEntries from [2/2] received in channel
[Follower 1/2/13/13/4] HeartBeat timeout after 399ms
[Leader 2/2/14/13/5] [repl 1] m = 13 matched
[Leader 2/2/14/13/5] tryIndexLogTerm, m = 14, mTerm = 2, ok = true
[Follower 1/2/13/13/4] AppendEntries RPC from [2/2], PrevLogInfo = [14/2], LeaderCommit = 13, Entries = []
[Follower 1/2/13/13/4] AppendEntries from [2/2] received in channel
[Follower 1/2/13/13/4] HeartBeat timeout after 342ms
[Leader 2/2/14/13/5] [repl 1] m = 14 not matched
[Leader 2/2/14/13/5] Peer 1 match index = 14
[Leader 2/2/14/13/5] logs.noopCount = 2
[Leader 2/2/15/13/6] Encode state, LAI = -1
[Leader 2/2/15/13/6] Start command with index = 15, commandIndex = 14
Command 4447108695505057755 started at index = 14 by leader 2
Command 14 replicated count = 0, cmd1 = %!d(<nil>), cmd = 4447108695505057755
[Leader 2/2/15/13/6] Replication to peer 1
[Follower 1/2/13/13/4] AppendEntries RPC from [2/2], PrevLogInfo = [13/1], LeaderCommit = 13, Entries = [14 15]
[Follower 1/2/13/13/4] AppendEntries from [2/2] received in channel
[Follower 1/2/13/13/4] HeartBeat timeout after 304ms
[Follower 1/2/15/13/6] Encode state, LAI = 9
[Follower 1/2/15/13/6] updateCommit to 13
[Leader 2/2/15/13/6] 1 confirmed log [14 15]
[Leader 2/2/15/13/6] Put ev *raft.ReplConfirmEvent
[Leader 2/2/15/13/6] Peer 1 confirmed log [14, 16)
[Leader 2/2/15/13/6] updateCommit to 15
[Leader 2/2/15/13/6] updateCommit: newCommit = 15
[Leader 2/2/15/15/6] Update LCI to 15
[Leader 2/2/15/15/6] Encode state, LAI = -1
[Leader 2/2/15/15/6] Applied log 14
server 2 applied command 14, last applied = 13
Command: set server 2 last applied = 14
Command 14 replicated count = 1, cmd1 = 4447108695505057755, cmd = 4447108695505057755
Command 14 replicated count = 1, cmd1 = 4447108695505057755, cmd = 4447108695505057755
[Leader 2/2/15/15/6] Replication to peer 1
[Follower 1/2/15/13/6] AppendEntries RPC from [2/2], PrevLogInfo = [15/2], LeaderCommit = 15, Entries = []
[Follower 1/2/15/13/6] AppendEntries from [2/2] received in channel
[Follower 1/2/15/13/6] HeartBeat timeout after 373ms
[Follower 1/2/15/13/6] updateCommit to 15
[Follower 1/2/15/13/6] updateCommit: newCommit = 15
[Follower 1/2/15/15/6] Update LCI to 15
[Follower 1/2/15/15/6] Encode state, LAI = 9
[Follower 1/2/15/15/6] Applied log 14
server 1 applied command 14, last applied = 13
Command: set server 1 last applied = 14
Command 14 replicated count = 2, cmd1 = 4447108695505057755, cmd = 4447108695505057755
Command with index 14 agreed

==============================

Start command 574177007882768964, expectedServers = 2, retry = true
[Leader 2/2/15/15/6] logs.noopCount = 2
[Leader 2/2/16/15/7] Encode state, LAI = -1
[Leader 2/2/16/15/7] Start command with index = 16, commandIndex = 15
Command 574177007882768964 started at index = 15 by leader 2
Command 15 replicated count = 0, cmd1 = %!d(<nil>), cmd = 574177007882768964
Command 15 replicated count = 0, cmd1 = %!d(<nil>), cmd = 574177007882768964
Command 15 replicated count = 0, cmd1 = %!d(<nil>), cmd = 574177007882768964
[Leader 2/2/16/15/7] Replication to peer 1
[Follower 1/2/15/15/6] AppendEntries RPC from [2/2], PrevLogInfo = [15/2], LeaderCommit = 15, Entries = [16 16]
[Follower 1/2/15/15/6] AppendEntries from [2/2] received in channel
[Follower 1/2/15/15/6] HeartBeat timeout after 357ms
[Follower 1/2/16/15/7] Encode state, LAI = 9
[Follower 1/2/16/15/7] updateCommit to 15
[Leader 2/2/16/15/7] 1 confirmed log [16 16]
[Leader 2/2/16/15/7] Put ev *raft.ReplConfirmEvent
[Leader 2/2/16/15/7] Peer 1 confirmed log [16, 17)
[Leader 2/2/16/15/7] updateCommit to 16
[Leader 2/2/16/15/7] updateCommit: newCommit = 16
[Leader 2/2/16/16/7] Update LCI to 16
[Leader 2/2/16/16/7] Encode state, LAI = -1
[Leader 2/2/16/16/7] Applied log 15
server 2 applied command 15, last applied = 14
Command: set server 2 last applied = 15
Command 15 replicated count = 1, cmd1 = 574177007882768964, cmd = 574177007882768964
Command 15 replicated count = 1, cmd1 = 574177007882768964, cmd = 574177007882768964
[Leader 2/2/16/16/7] Replication to peer 1
[Follower 1/2/16/15/7] AppendEntries RPC from [2/2], PrevLogInfo = [16/2], LeaderCommit = 16, Entries = []
[Follower 1/2/16/15/7] AppendEntries from [2/2] received in channel
[Follower 1/2/16/15/7] HeartBeat timeout after 388ms
[Follower 1/2/16/15/7] updateCommit to 16
[Follower 1/2/16/15/7] updateCommit: newCommit = 16
[Follower 1/2/16/16/7] Update LCI to 16
[Follower 1/2/16/16/7] Encode state, LAI = 9
[Follower 1/2/16/16/7] Applied log 15
server 1 applied command 15, last applied = 14
Command: set server 1 last applied = 15
Command 15 replicated count = 2, cmd1 = 574177007882768964, cmd = 574177007882768964
Command with index 15 agreed
server 0 ingest snapshot with index = -1
Snapshot: set server 0 last applied = 9
[Server 0] Recover with
LLI = 13, LCI = 13, LAI = -1
offset = 10
[Server 0] Recover with LII = 9
Add ApplySnapshotEntry for unfinished snapshot with index = 9
[Leader 2/2/16/16/7] Replication to peer 1
[Follower 1/2/16/16/7] AppendEntries RPC from [2/2], PrevLogInfo = [16/2], LeaderCommit = 16, Entries = []
[Follower 1/2/16/16/7] AppendEntries from [2/2] received in channel
[Follower 1/2/16/16/7] HeartBeat timeout after 349ms
[Follower 1/2/16/16/7] updateCommit to 16
[Leader 2/2/16/16/7] Replication to peer 1
[Follower 1/2/16/16/7] AppendEntries RPC from [2/2], PrevLogInfo = [16/2], LeaderCommit = 16, Entries = []
[Follower 1/2/16/16/7] AppendEntries from [2/2] received in channel
[Follower 1/2/16/16/7] HeartBeat timeout after 325ms
[Follower 1/2/16/16/7] updateCommit to 16
victim 0 started and connected

==============================

Start command 3793015272173462675, expectedServers = 3, retry = true
[Follower 0/1/13/13/4] Activated
[Leader 2/2/16/16/7] logs.noopCount = 2
[Follower 0/1/13/13/4] HeartBeat timeout after 384ms
[Leader 2/2/17/16/8] Encode state, LAI = -1
server 0 applied snapshot with LII 9
server 0 ingest snapshot with index = 9
[Follower 0/1/13/13/4] Snapshot update LAI = 9
[Follower 0/1/13/13/4] Encode state, LAI = 9
[Leader 2/2/17/16/8] Start command with index = 17, commandIndex = 16
Command 3793015272173462675 started at index = 16 by leader 2
Snapshot: set server 0 last applied = 9
Command 16 replicated count = 0, cmd1 = %!d(<nil>), cmd = 3793015272173462675
Command 16 replicated count = 0, cmd1 = %!d(<nil>), cmd = 3793015272173462675
[Leader 2/2/17/16/8] Replication to peer 1
Command 16 replicated count = 0, cmd1 = %!d(<nil>), cmd = 3793015272173462675
[Follower 1/2/16/16/7] AppendEntries RPC from [2/2], PrevLogInfo = [16/2], LeaderCommit = 16, Entries = [17 17]
[Follower 1/2/16/16/7] AppendEntries from [2/2] received in channel
[Follower 1/2/16/16/7] HeartBeat timeout after 374ms
[Follower 1/2/17/16/8] Encode state, LAI = 9
[Follower 1/2/17/16/8] updateCommit to 16
[Leader 2/2/17/16/8] 1 confirmed log [17 17]
[Leader 2/2/17/16/8] Put ev *raft.ReplConfirmEvent
[Leader 2/2/17/16/8] Peer 1 confirmed log [17, 18)
[Leader 2/2/17/16/8] updateCommit to 17
[Leader 2/2/17/16/8] updateCommit: newCommit = 17
[Leader 2/2/17/17/8] Update LCI to 17
[Leader 2/2/17/17/8] Encode state, LAI = -1
[Leader 2/2/17/17/8] Applied log 16
server 2 applied command 16, last applied = 15
Command: set server 2 last applied = 16
Command 16 replicated count = 1, cmd1 = 3793015272173462675, cmd = 3793015272173462675
Command 16 replicated count = 1, cmd1 = 3793015272173462675, cmd = 3793015272173462675
[Follower 0/1/13/13/4] AppendEntries RPC from [2/2], PrevLogInfo = [11/1], LeaderCommit = 13, Entries = []
[Follower 0/1/13/13/4] AppendEntries from [2/2] received in channel
[Follower 0/2/13/13/4] Encode state, LAI = 9
[Follower 0/2/13/13/4] HeartBeat timeout after 389ms
[Follower 0/2/13/13/4] Received an entry index 11 < LCI 13
[Leader 2/2/17/17/8] [repl 0] m = 11 matched
[Leader 2/2/17/17/8] tryIndexLogTerm, m = 13, mTerm = 1, ok = true
[Follower 0/2/13/13/4] AppendEntries RPC from [2/2], PrevLogInfo = [13/1], LeaderCommit = 17, Entries = []
[Follower 0/2/13/13/4] AppendEntries from [2/2] received in channel
[Follower 0/2/13/13/4] HeartBeat timeout after 334ms
[Leader 2/2/17/17/8] [repl 0] m = 13 matched
[Leader 2/2/17/17/8] tryIndexLogTerm, m = 14, mTerm = 2, ok = true
[Follower 0/2/13/13/4] AppendEntries RPC from [2/2], PrevLogInfo = [14/2], LeaderCommit = 17, Entries = []
[Follower 0/2/13/13/4] AppendEntries from [2/2] received in channel
[Follower 0/2/13/13/4] HeartBeat timeout after 380ms
[Leader 2/2/17/17/8] Replication to peer 1
[Leader 2/2/17/17/8] [repl 0] m = 14 not matched
[Leader 2/2/17/17/8] Peer 0 match index = 14
[Follower 1/2/17/16/8] AppendEntries RPC from [2/2], PrevLogInfo = [17/2], LeaderCommit = 17, Entries = []
[Follower 1/2/17/16/8] AppendEntries from [2/2] received in channel
[Follower 1/2/17/16/8] HeartBeat timeout after 369ms
[Follower 1/2/17/16/8] updateCommit to 17
[Follower 1/2/17/16/8] updateCommit: newCommit = 17
[Follower 1/2/17/17/8] Update LCI to 17
[Follower 1/2/17/17/8] Encode state, LAI = 9
[Follower 1/2/17/17/8] Applied log 16
server 1 applied command 16, last applied = 15
Command: set server 1 last applied = 16
Command 16 replicated count = 2, cmd1 = 3793015272173462675, cmd = 3793015272173462675
Command 16 replicated count = 2, cmd1 = 3793015272173462675, cmd = 3793015272173462675
[Leader 2/2/17/17/8] Replication to peer 0
[Leader 2/2/17/17/8] Replication to peer 1
[Follower 1/2/17/17/8] AppendEntries RPC from [2/2], PrevLogInfo = [17/2], LeaderCommit = 17, Entries = []
[Follower 1/2/17/17/8] AppendEntries from [2/2] received in channel
[Follower 0/2/13/13/4] AppendEntries RPC from [2/2], PrevLogInfo = [13/1], LeaderCommit = 17, Entries = [14 17]
[Follower 1/2/17/17/8] HeartBeat timeout after 310ms
[Follower 0/2/13/13/4] AppendEntries from [2/2] received in channel
[Follower 1/2/17/17/8] updateCommit to 17
[Follower 0/2/13/13/4] HeartBeat timeout after 387ms
[Follower 0/2/17/13/8] Encode state, LAI = 9
[Follower 0/2/17/13/8] updateCommit to 17
[Follower 0/2/17/13/8] updateCommit: newCommit = 17
[Follower 0/2/17/17/8] Update LCI to 17
server 0 applied command 14, last applied = 9
server 0 apply out of order, expected index 10, got 14
[Follower 0/2/17/17/8] Encode state, LAI = 9
exit status 1
FAIL	6.5840/raft	3.665s
